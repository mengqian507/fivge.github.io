---
id: route
title: Angular Route
---

### Router

```ts

constructor(
  private route: ActivatedRoute,
  private router: Router
) {}

```

ä¸‹é¢æ˜¯ä¸€äº›**è·¯ç”±å™¨**ä¸­çš„å…³é”®è¯æ±‡åŠå…¶å«ä¹‰ï¼š

| è·¯ç”±å™¨éƒ¨ä»¶                         | å«ä¹‰                                                                                                                               |
| :--------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------- |
| `Router`ï¼ˆè·¯ç”±å™¨ï¼‰                 | ä¸ºæ¿€æ´»çš„ URL æ˜¾ç¤ºåº”ç”¨ç»„ä»¶ã€‚ç®¡ç†ä»ä¸€ä¸ªç»„ä»¶åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„å¯¼èˆª                                                                        |
| `RouterModule`                     | ä¸€ä¸ªç‹¬ç«‹çš„ NgModuleï¼Œç”¨äºæä¾›æ‰€éœ€çš„æœåŠ¡æä¾›å•†ï¼Œä»¥åŠç”¨æ¥åœ¨åº”ç”¨è§†å›¾ä¹‹é—´è¿›è¡Œå¯¼èˆªçš„æŒ‡ä»¤ã€‚                                              |
| `Routes`ï¼ˆè·¯ç”±æ•°ç»„ï¼‰               | å®šä¹‰äº†ä¸€ä¸ªè·¯ç”±æ•°ç»„ï¼Œæ¯ä¸€ä¸ªéƒ½ä¼šæŠŠä¸€ä¸ª URL è·¯å¾„æ˜ å°„åˆ°ä¸€ä¸ªç»„ä»¶ã€‚                                                                      |
| `Route`ï¼ˆè·¯ç”±ï¼‰                    | å®šä¹‰è·¯ç”±å™¨è¯¥å¦‚ä½•æ ¹æ® URL æ¨¡å¼ï¼ˆpatternï¼‰æ¥å¯¼èˆªåˆ°ç»„ä»¶ã€‚å¤§å¤šæ•°è·¯ç”±éƒ½ç”±è·¯å¾„å’Œç»„ä»¶ç±»æ„æˆã€‚                                             |
| `RouterOutlet`ï¼ˆè·¯ç”±å‡ºå£ï¼‰         | è¯¥æŒ‡ä»¤ï¼ˆ`<router-outlet>`ï¼‰ç”¨æ¥æ ‡è®°å‡ºè·¯ç”±å™¨è¯¥åœ¨å“ªé‡Œæ˜¾ç¤ºè§†å›¾ã€‚                                                                      |
| `RouterLink`ï¼ˆè·¯ç”±é“¾æ¥ï¼‰           | è¿™ä¸ªæŒ‡ä»¤æŠŠå¯ç‚¹å‡»çš„ HTML å…ƒç´ ç»‘å®šåˆ°æŸä¸ªè·¯ç”±ã€‚ç‚¹å‡»å¸¦æœ‰ `routerLink` æŒ‡ä»¤ï¼ˆç»‘å®šåˆ°*å­—ç¬¦ä¸²*æˆ–*é“¾æ¥å‚æ•°æ•°ç»„*ï¼‰çš„å…ƒç´ æ—¶å°±ä¼šè§¦å‘ä¸€æ¬¡å¯¼èˆªã€‚ |
| `RouterLinkActive`ï¼ˆæ´»åŠ¨è·¯ç”±é“¾æ¥ï¼‰ | å½“ HTML å…ƒç´ ä¸Šæˆ–å…ƒç´ å†…çš„`routerLink`å˜ä¸ºæ¿€æ´»æˆ–éæ¿€æ´»çŠ¶æ€æ—¶ï¼Œè¯¥æŒ‡ä»¤ä¸ºè¿™ä¸ª HTML å…ƒç´ æ·»åŠ æˆ–ç§»é™¤ CSS ç±»ã€‚                              |
| `ActivatedRoute`ï¼ˆæ¿€æ´»çš„è·¯ç”±ï¼‰     | ä¸ºæ¯ä¸ªè·¯ç”±ç»„ä»¶æä¾›çš„ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒåŒ…å«ç‰¹å®šäºè·¯ç”±çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è·¯ç”±å‚æ•°ã€é™æ€æ•°æ®ã€è§£ææ•°æ®ã€å…¨å±€æŸ¥è¯¢å‚æ•°å’Œå…¨å±€ç¢ç‰‡ï¼ˆfragmentï¼‰ã€‚       |
| `RouterState`ï¼ˆè·¯ç”±å™¨çŠ¶æ€ï¼‰        | è·¯ç”±å™¨çš„å½“å‰çŠ¶æ€åŒ…å«äº†ä¸€æ£µç”±ç¨‹åºä¸­æ¿€æ´»çš„è·¯ç”±æ„æˆçš„æ ‘ã€‚å®ƒåŒ…å«ä¸€äº›ç”¨äºéå†è·¯ç”±æ ‘çš„å¿«æ·æ–¹æ³•ã€‚                                         |
| é“¾æ¥å‚æ•°æ•°ç»„                       | è¿™ä¸ªæ•°ç»„ä¼šè¢«è·¯ç”±å™¨è§£é‡Šæˆä¸€ä¸ªè·¯ç”±æ“ä½œæŒ‡å—ã€‚ä½ å¯ä»¥æŠŠä¸€ä¸ª`RouterLink`ç»‘å®šåˆ°è¯¥æ•°ç»„ï¼Œæˆ–è€…æŠŠå®ƒä½œä¸ºå‚æ•°ä¼ ç»™`Router.navigate`æ–¹æ³•ã€‚        |
| è·¯ç”±ç»„ä»¶                           | ä¸€ä¸ªå¸¦æœ‰`RouterOutlet`çš„ Angular ç»„ä»¶ï¼Œå®ƒæ ¹æ®è·¯ç”±å™¨çš„å¯¼èˆªæ¥æ˜¾ç¤ºç›¸åº”çš„è§†å›¾ã€‚                                                        |

- Router è·¯ç”±å™¨
- Route è·¯ç”±
- routerLink è·¯ç”±å™¨é“¾æ¥
-

---

### Route

> è·¯ç”± `Routes`

```typescript
const appRoutes: Routes = [
  { path: "crisis-center", component: CrisisListComponent },
  { path: "hero/:id", component: HeroDetailComponent },
  {
    path: "heroes",
    component: HeroListComponent,
    data: { title: "Heroes List" }
  },
  { path: "", redirectTo: "/heroes", pathMatch: "full" },
  { path: "**", component: PageNotFoundComponent }
];
```

#### path

`path` ä¸èƒ½ä»¥*æ–œæ ï¼ˆ`/`ï¼‰*å¼€å¤´ï¼Œè¿™æ ·åœ¨åº”ç”¨çš„å¤šä¸ªè§†å›¾ä¹‹é—´å¯¼èˆªæ—¶ï¼Œå¯ä»¥ä»»æ„ä½¿ç”¨ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ã€‚

`:id` æ˜¯ä¸€ä¸ªè·¯ç”±å‚æ•°çš„ä»¤ç‰Œ(Token)ã€‚æ¯”å¦‚ /hero/42 è¿™ä¸ª URL ä¸­ï¼Œâ€œ42â€å°±æ˜¯ id å‚æ•°çš„å€¼ã€‚ å®ƒä¸º*è·¯ç”±å‚æ•°*åœ¨è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªâ€œç©ºä½â€ã€‚åœ¨è¿™é‡Œï¼Œè·¯ç”±å™¨æŠŠè‹±é›„çš„ `id` æ’å…¥åˆ°é‚£ä¸ªâ€œç©ºä½â€ä¸­ã€‚

ç©ºè·¯å¾„ï¼ˆ`''`ï¼‰è¡¨ç¤ºåº”ç”¨çš„é»˜è®¤è·¯å¾„ï¼Œå½“ URL ä¸ºç©ºæ—¶å°±ä¼šè®¿é—®é‚£é‡Œï¼Œå› æ­¤å®ƒé€šå¸¸ä¼šä½œä¸ºèµ·ç‚¹ã€‚

é‡å®šå‘è·¯ç”±éœ€è¦ä¸€ä¸ª `pathMatch` å±æ€§ï¼Œæ¥å‘Šè¯‰è·¯ç”±å™¨å¦‚ä½•ç”¨ URL å»åŒ¹é…è·¯ç”±çš„è·¯å¾„ï¼Œå¦åˆ™è·¯ç”±å™¨å°±ä¼šæŠ¥é”™ã€‚

ä»æŠ€æœ¯è§’åº¦è¯´ï¼Œ`pathMatch = 'full'` å¯¼è‡´ URL ä¸­*å‰©ä¸‹çš„*ã€æœªåŒ¹é…çš„éƒ¨åˆ†å¿…é¡»ç­‰äº `''`ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·³è½¬è·¯ç”±åœ¨ä¸€ä¸ªé¡¶çº§è·¯ç”±ä¸­ï¼Œå› æ­¤*å‰©ä¸‹çš„*URL å’Œ*å®Œæ•´çš„*URL æ˜¯ä¸€æ ·çš„ã€‚

`pathMatch` çš„å¦ä¸€ä¸ªå¯èƒ½çš„å€¼æ˜¯ `'prefix'`ï¼Œå®ƒä¼šå‘Šè¯‰è·¯ç”±å™¨ï¼šå½“*å‰©ä¸‹çš„*URL ä»¥è¿™ä¸ªè·³è½¬è·¯ç”±ä¸­çš„ `prefix` å€¼å¼€å¤´æ—¶ï¼Œå°±ä¼šåŒ¹é…ä¸Šè¿™ä¸ªè·³è½¬è·¯ç”±ã€‚

> é»˜è®¤è·¯ç”±åº”è¯¥åªæœ‰åœ¨*æ•´ä¸ª*URL ç­‰äº `''` æ—¶æ‰é‡å®šå‘åˆ° `HeroListComponent`ï¼Œåˆ«å¿˜äº†æŠŠé‡å®šå‘è·¯ç”±è®¾ç½®ä¸º `pathMatch = 'full'`ã€‚

*é€šé…ç¬¦*è·¯ç”±çš„ `path` æ˜¯ä¸¤ä¸ªæ˜Ÿå·ï¼ˆ`**`ï¼‰ï¼Œå®ƒä¼šåŒ¹é…*ä»»ä½•* URLã€‚ å½“è·¯ç”±å™¨åŒ¹é…ä¸ä¸Šä»¥å‰å®šä¹‰çš„é‚£äº›è·¯ç”±æ—¶ï¼Œå®ƒå°±ä¼šé€‰æ‹©*è¿™ä¸ª*è·¯ç”±ã€‚

é€šé…ç¬¦è·¯ç”±æ˜¯è·¯ç”±é…ç½®ä¸­æœ€æ²¡æœ‰ç‰¹å®šæ€§çš„é‚£ä¸ªï¼Œå› æ­¤åŠ¡å¿…ç¡®ä¿å®ƒæ˜¯é…ç½®ä¸­çš„*æœ€åä¸€ä¸ª*è·¯ç”±ã€‚

`**` è·¯å¾„æ˜¯ä¸€ä¸ª**é€šé…ç¬¦**ã€‚å®ƒèƒ½åŒ¹é…ä¸Š*æ¯ä¸€ä¸ª URL*ã€‚å½“æ‰€è¯·æ±‚çš„ URL ä¸åŒ¹é…å‰é¢å®šä¹‰çš„è·¯ç”±è¡¨ä¸­çš„ä»»ä½•è·¯å¾„æ—¶ï¼Œè·¯ç”±å™¨å°±ä¼šé€‰æ‹©æ­¤è·¯ç”±ã€‚ è¿™ä¸ªç‰¹æ€§å¯ç”¨äºæ˜¾ç¤ºâ€œ404 - Not Foundâ€é¡µï¼Œæˆ–è‡ªåŠ¨é‡å®šå‘åˆ°å…¶å®ƒè·¯ç”±ã€‚

è·¯ç”±å™¨ä½¿ç”¨**å…ˆåŒ¹é…è€…ä¼˜å…ˆ**çš„ç­–ç•¥æ¥åŒ¹é…è·¯ç”±ï¼Œæ‰€ä»¥ï¼Œå…·ä½“è·¯ç”±åº”è¯¥æ”¾åœ¨é€šç”¨è·¯ç”±çš„å‰é¢ã€‚

#### data

data å±æ€§ç”¨æ¥å­˜æ”¾äºæ¯ä¸ªå…·ä½“è·¯ç”±æœ‰å…³çš„ä»»æ„ä¿¡æ¯ã€‚è¯¥æ•°æ®å¯ä»¥è¢«ä»»ä½•ä¸€ä¸ªæ¿€æ´»è·¯ç”±è®¿é—®ï¼Œå¹¶èƒ½ç”¨æ¥ä¿å­˜è¯¸å¦‚ é¡µæ ‡é¢˜ã€é¢åŒ…å±‘ä»¥åŠå…¶å®ƒé™æ€åªè¯»æ•°æ®ã€‚ä½¿ç”¨ resolve å®ˆå«æ¥è·å–åŠ¨æ€æ•°æ®ã€‚

### é“¾æ¥å‚æ•°æ•°ç»„

ä¸»è¦ä¾› `Router` åŠ `[RouterLink]`ä½¿ç”¨

https://angular.cn/guide/router#link-parameters-array

```html
/hero/heroes/12138 /hero/heroes;id=12138 /hero/heroes/12138;id=12139 --ä¸æ¨èï¼Œè§£æä¸åˆ°å¿…è¦å‚æ•°
/hero/heroes?id=12138&foo=bar /hero/heroes/12138
<a [routerLink]="['/hero/heroes', { id:'12138' }]"></a>
<a [routerLink]="['/hero/heroes', { id:'12138' }]"></a>
<a [routerLink]="['/hero/heroes', { id:'12138' }]"></a>
<a [routerLink]="['/hero/heroes', { id:'12138' }]"></a>
```

#### ç›¸å¯¹è·¯å¾„

è·¯ç”±å™¨æ”¯æŒåœ¨*é“¾æ¥å‚æ•°æ•°ç»„*ä¸­ä½¿ç”¨â€œç›®å½•å¼â€è¯­æ³•æ¥ä¸ºæŸ¥è¯¢è·¯ç”±åæä¾›å¸®åŠ©ï¼š

`./` æˆ– `æ— å‰å¯¼æ–œçº¿` å½¢å¼æ˜¯ç›¸å¯¹äºå½“å‰çº§åˆ«çš„ã€‚

`../` ä¼šå›åˆ°å½“å‰è·¯ç”±è·¯å¾„çš„ä¸Šä¸€çº§ã€‚

ä½ å¯ä»¥æŠŠç›¸å¯¹å¯¼èˆªè¯­æ³•å’Œä¸€ä¸ªç¥–å…ˆè·¯å¾„ç»„åˆèµ·æ¥ç”¨ã€‚ å¦‚æœä¸å¾—ä¸å¯¼èˆªåˆ°ä¸€ä¸ªå…„å¼Ÿè·¯ç”±ï¼Œä½ å¯ä»¥ç”¨ `../` æ¥å›åˆ°ä¸Šä¸€çº§ï¼Œç„¶åè¿›å…¥å…„å¼Ÿè·¯ç”±è·¯å¾„ä¸­ã€‚

### RouterLink

> è·¯ç”±å™¨é“¾æ¥ `routerLink` `routerLinkActive`

```html
<a routerLink="/hero/hero">Heroes</a>
<a routerLink="/hero" routerLinkActive="active fly" [routerLinkActiveOptions]="{ exact: true }">hero</a>
```

```css
.active {
  color: red;
}

.fly {
  background-color: greenyellow;
}
```

#### routerLink

1. æŠŠä¸€ä¸ªå­—ç¬¦ä¸²èµ‹ç»™ `routerLink`ï¼ˆâ€œä¸€æ¬¡æ€§â€ç»‘å®šï¼‰

`/hero/hero`

```html
<a routerLink="/hero/hero">hero</a>
```

2. å¦‚æœéœ€è¦æ›´åŠ åŠ¨æ€çš„å¯¼èˆªè·¯å¾„ï¼Œé‚£å°±æŠŠå®ƒç»‘å®šåˆ°ä¸€ä¸ªè¿”å›**é“¾æ¥å‚æ•°æ•°ç»„**çš„æ¨¡æ¿è¡¨è¾¾å¼ã€‚ è·¯ç”±å™¨ä¼šæŠŠè¿™ä¸ªæ•°ç»„è§£ææˆå®Œæ•´çš„ URLã€‚

`/hero/hero/15`

```html
<a [routerLink]="['/hero/hero', id]">custom {{id}}</a>
```

#### routerLinkActive

> è·¯ç”±é“¾æ¥çš„æ¿€æ´»çŠ¶æ€

```html
<a routerLink="/hero" routerLinkActive="active fly" [routerLinkActiveOptions]="{ exact: true }">hero</a>
```

`RouterLinkActive` æŒ‡ä»¤ä¼šåŸºäºå½“å‰çš„ `RouterState` ä¸ºæ´»åŠ¨çš„ `RouterLink` åˆ‡æ¢æ‰€ç»‘å®šçš„ css ç±»ã€‚ç­‰å·å³è¾¹çš„æ¨¡æ¿è¡¨è¾¾å¼åŒ…å«ä¸€äº›ç”¨ç©ºæ ¼åˆ†éš”çš„ CSS ç±»åï¼Œå½“è¿™ä¸ªé“¾æ¥æ¿€æ´»æ—¶ï¼Œè·¯ç”±å™¨å°†ä¼šæŠŠå®ƒä»¬åŠ ä¸Šå»ï¼ˆå¹¶åœ¨å¤„äºéæ´»åŠ¨çŠ¶æ€æ—¶ç§»é™¤ï¼‰ã€‚è¿˜å¯ä»¥æŠŠ `RouterLinkActive` è®¾ç½®ä¸ºä¸€ä¸ªç±»ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå¦‚ `[routerLinkActive]="'active fluffy'"`ï¼Œæˆ–æŠŠå®ƒç»‘å®šåˆ°ä¸€ä¸ªè¿”å›ç±»ä¼¼å­—ç¬¦ä¸²çš„ç»„ä»¶å±æ€§ã€‚

è·¯ç”±é“¾æ¥çš„æ¿€æ´»çŠ¶æ€ä¼šå‘ä¸‹çº§è”åˆ°è·¯ç”±æ ‘ä¸­çš„æ¯ä¸ªå±‚çº§ï¼Œæ‰€ä»¥ï¼Œçˆ¶å­è·¯ç”±é“¾æ¥å¯èƒ½ä¼šåŒæ—¶æ¿€æ´»ã€‚è¦è¦†ç›–è¿™ç§è¡Œä¸ºï¼Œå¯ä»¥æŠŠ `[routerLinkActiveOptions]` ç»‘å®šä¸º `{ exact: true }` è¡¨è¾¾å¼ï¼Œè¿™æ · `RouterLink` åªæœ‰å½“ URL ä¸å½“å‰ URL ç²¾ç¡®åŒ¹é…æ—¶æ‰ä¼šæ¿€æ´»ã€‚

### Router

> è·¯ç”±å™¨ `router`

#### router.navigate

è·¯ç”±çš„ `navigate` æ–¹æ³•æ¥å—ä¸€ä¸ªå•æ¡ç›®çš„**é“¾æ¥å‚æ•°æ•°ç»„**

```ts
// /hero/heroes;id=12138;foo=bar
this.router.navigate(["/hero/heroes", { id: this.id, foo: "bar" }]);
this.router.navigate([{ foo: "Bob" }]);
```

ç”¨ `Router.navigate` æ–¹æ³•å¯¼èˆªåˆ°ç›¸å¯¹è·¯å¾„æ—¶ï¼Œå¿…é¡»æä¾›å½“å‰çš„ `ActivatedRoute`ï¼Œæ¥è®©è·¯ç”±å™¨çŸ¥é“ä½ ç°åœ¨ä½äºè·¯ç”±æ ‘ä¸­çš„ä»€ä¹ˆä½ç½®ã€‚

åœ¨é“¾æ¥å‚æ•°æ•°ç»„åé¢ï¼Œæ·»åŠ ä¸€ä¸ªå¸¦æœ‰ `relativeTo` å±æ€§çš„å¯¹è±¡ï¼Œå¹¶æŠŠå®ƒè®¾ç½®ä¸ºå½“å‰çš„ `ActivatedRoute`ã€‚ è¿™æ ·è·¯ç”±å™¨å°±ä¼šåŸºäºå½“å‰æ¿€æ´»è·¯ç”±çš„ä½ç½®æ¥è®¡ç®—å‡ºç›®æ ‡ URLã€‚

```typescript
// /hero/hero/52788 => /hero/heroes
this.router.navigate(["../../heroes"], { relativeTo: this.route });
```

> å¦‚æœç”¨ `RouterLink` ï¼Œä¸å†éœ€è¦æä¾› `relativeTo` å±æ€§ã€‚ `ActivatedRoute` å·²ç»éšå«åœ¨äº† `RouterLink` æŒ‡ä»¤ä¸­

> å½“è°ƒç”¨è·¯ç”±å™¨çš„ `navigateByUrl` æ—¶ï¼Œ**æ€»æ˜¯**è¦æŒ‡å®šå®Œæ•´çš„ç»å¯¹è·¯å¾„

### RouterState

> è·¯ç”±å™¨çŠ¶æ€

åœ¨å¯¼èˆªæ—¶çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸæˆåŠŸå®Œæˆæ—¶ï¼Œè·¯ç”±å™¨ä¼šæ„å»ºå‡ºä¸€ä¸ª `ActivatedRoute` ç»„æˆçš„æ ‘ï¼Œå®ƒè¡¨ç¤ºè·¯ç”±å™¨çš„å½“å‰çŠ¶æ€ã€‚ ä½ å¯ä»¥åœ¨åº”ç”¨ä¸­çš„ä»»ä½•åœ°æ–¹ç”¨ `Router` æœåŠ¡åŠå…¶ `routerState` å±æ€§æ¥è®¿é—®å½“å‰çš„ `RouterState` å€¼ã€‚

`RouterState` ä¸­çš„æ¯ä¸ª `ActivatedRoute` éƒ½æä¾›äº†ä»ä»»æ„æ¿€æ´»è·¯ç”±å¼€å§‹å‘ä¸Šæˆ–å‘ä¸‹éå†è·¯ç”±æ ‘çš„ä¸€ç§æ–¹å¼ï¼Œä»¥è·å¾—å…³äºçˆ¶ã€å­ã€å…„å¼Ÿè·¯ç”±çš„ä¿¡æ¯ã€‚

```typescript
  constructor(private router: Router) {}
  // Router æœåŠ¡åŠå…¶ routerState å±æ€§æ¥è®¿é—®å½“å‰çš„ RouterState

  ngOnInit() {
    console.log(`Router`, this.router.routerState);
  }
```

### ActivatedRoute

> æ¿€æ´»çš„è·¯ç”± `route`

è¯¥è·¯ç”±çš„è·¯å¾„å’Œå‚æ•°å¯ä»¥é€šè¿‡æ³¨å…¥è¿›æ¥çš„ä¸€ä¸ªåå«`ActivatedRoute`çš„è·¯ç”±æœåŠ¡æ¥è·å–ã€‚ å®ƒæœ‰ä¸€å¤§å †æœ‰ç”¨çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š

| å±æ€§            | è¯´æ˜                                                                                                                          |
| :-------------- | :---------------------------------------------------------------------------------------------------------------------------- |
| `url`           | è·¯ç”±è·¯å¾„çš„ `Observable` å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªç”±è·¯ç”±è·¯å¾„ä¸­çš„å„ä¸ªéƒ¨åˆ†ç»„æˆçš„å­—ç¬¦ä¸²æ•°ç»„                                                    |
| `data`          | ä¸€ä¸ª `Observable`ï¼Œå…¶ä¸­åŒ…å«æä¾›ç»™è·¯ç”±çš„ `data` å¯¹è±¡ã€‚ä¹ŸåŒ…å«ç”±è§£æå®ˆå«ï¼ˆresolve guardï¼‰è§£æè€Œæ¥çš„å€¼                            |
| `paramMap`      | ä¸€ä¸ª `Observable`ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç”±å½“å‰è·¯ç”±çš„å¿…è¦å‚æ•°å’Œå¯é€‰å‚æ•°ç»„æˆçš„ map å¯¹è±¡ã€‚ç”¨è¿™ä¸ª map å¯ä»¥è·å–æ¥è‡ªåŒåå‚æ•°çš„å•ä¸€å€¼æˆ–å¤šé‡å€¼ |
| `queryParamMap` | ä¸€ä¸ª `Observable`ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¯¹æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ•ˆçš„æŸ¥è¯¢å‚æ•°ç»„æˆçš„ map å¯¹è±¡ã€‚ ç”¨è¿™ä¸ª map å¯ä»¥è·å–æ¥è‡ªæŸ¥è¯¢å‚æ•°çš„å•ä¸€å€¼æˆ–å¤šé‡å€¼    |
| `fragment`      | ä¸€ä¸ªé€‚ç”¨äºæ‰€æœ‰è·¯ç”±çš„ URL çš„ fragmentï¼ˆç‰‡æ®µï¼‰çš„ `Observable`                                                                   |
| `outlet`        | è¦æŠŠè¯¥è·¯ç”±æ¸²æŸ“åˆ°çš„ `RouterOutlet` çš„åå­—ã€‚å¯¹äºæ— åè·¯ç”±ï¼Œå®ƒçš„è·¯ç”±åæ˜¯ `primary`ï¼Œè€Œä¸æ˜¯ç©ºä¸²                                    |
| `routeConfig`   | ç”¨äºè¯¥è·¯ç”±çš„è·¯ç”±é…ç½®ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«åŸå§‹è·¯å¾„                                                                                    |
| `parent`        | å½“è¯¥è·¯ç”±æ˜¯ä¸€ä¸ªå­è·¯ç”±æ—¶ï¼Œè¡¨ç¤ºè¯¥è·¯ç”±çš„çˆ¶çº§ `ActivatedRoute`                                                                     |
| `firstChild`    | åŒ…å«è¯¥è·¯ç”±çš„å­è·¯ç”±åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ª `ActivatedRoute`                                                                             |
| `children`      | åŒ…å«å½“å‰è·¯ç”±ä¸‹æ‰€æœ‰å·²æ¿€æ´»çš„å­è·¯ç”±                                                                                              |

æœ‰ä¸¤ä¸ªæ—§å¼å±æ€§ä»ç„¶æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒä»¬ä¸å¦‚å…¶æ›¿ä»£å“é‚£æ ·å¼ºåŠ›ï¼Œå»ºè®®ä¸å†ç”¨å®ƒä»¬ã€‚

- `params` â€”â€” ä¸€ä¸ª `Observable` å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å½“å‰è·¯ç”±çš„å¿…è¦å‚æ•°å’Œå¯é€‰å‚æ•°ã€‚è¯·æ”¹ç”¨ `paramMap`ã€‚

- `queryParams` â€”â€” ä¸€ä¸ª `Observable` å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¯¹æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ•ˆçš„æŸ¥è¯¢å‚æ•°ã€‚è¯·æ”¹ç”¨ `queryParamMap`ã€‚

#### Observable

å­ç»„ä»¶å¯å¤ç”¨æ—¶ï¼Œé‡‡ç”¨è®¢é˜…çš„å½¢å¼ï¼ŒåŠ¨æ€è·å–å‚æ•°

| `has(name)`    | å¦‚æœå‚æ•°åä½äºå‚æ•°åˆ—è¡¨ä¸­ï¼Œå°±è¿”å› `true`                                                                                        |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `get(name)`    | å¦‚æœè¿™ä¸ª map ä¸­æœ‰å‚æ•°åå¯¹åº”çš„å‚æ•°å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œå°±è¿”å›å®ƒï¼Œå¦åˆ™è¿”å› `null`ã€‚å¦‚æœå‚æ•°å€¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±è¿”å›å®ƒçš„*ç¬¬ä¸€ä¸ª*å…ƒç´ ã€‚ |
| `getAll(name)` | å¦‚æœè¿™ä¸ª map ä¸­æœ‰å‚æ•°åå¯¹åº”çš„å€¼ï¼Œå°±è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦åˆ™è¿”å›ç©ºæ•°ç»„ã€‚å½“ä¸€ä¸ªå‚æ•°åå¯èƒ½å¯¹åº”å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨ `getAll`ã€‚     |
| `keys`         | è¿”å›è¿™ä¸ª map ä¸­çš„æ‰€æœ‰å‚æ•°åç»„æˆçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚                                                                                  |

> å½“åœ¨ç»„ä»¶ä¸­è®¢é˜…ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡æ—¶ï¼Œä½ é€šå¸¸æ€»æ˜¯è¦åœ¨ç»„ä»¶é”€æ¯æ—¶å–æ¶ˆè¿™ä¸ªè®¢é˜…ã€‚
>
> ä½†æ˜¯ä¹Ÿæœ‰å°‘æ•°ä¾‹å¤–æƒ…å†µä¸éœ€è¦å–æ¶ˆè®¢é˜…ã€‚ `ActivateRoute` ä¸­çš„å„ç§å¯è§‚å¯Ÿå¯¹è±¡å°±æ˜¯å±äºè¿™ç§æƒ…å†µã€‚

#### Snapshot

> Snapshotï¼ˆå¿«ç…§ï¼‰ï¼šå½“ä¸éœ€è¦ Observable æ—¶çš„æ›¿ä»£å“

å‡å¦‚ä½ å¾ˆç¡®å®šè¿™ä¸ªç»„ä»¶çš„å®ä¾‹æ°¸è¿œã€æ°¸è¿œä¸ä¼šè¢«å¤ç”¨ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨å¿«ç…§æ¥ç®€åŒ–è¿™æ®µä»£ç ã€‚

çˆ¶å­ç»„ä»¶ã€å­è·¯ç”±éƒ½å¯å¤ç”¨ç»„ä»¶

#### paramMap

> ä¸€ä¸ª `Observable`ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç”±å½“å‰è·¯ç”±çš„å¿…è¦å‚æ•°å’Œå¯é€‰å‚æ•°ç»„æˆçš„ map å¯¹è±¡ã€‚ç”¨è¿™ä¸ª map å¯ä»¥è·å–æ¥è‡ªåŒåå‚æ•°çš„å•ä¸€å€¼æˆ–å¤šé‡å€¼

`/hero/12138`

`/heroes;id=12138`

```typescript
// Observable
this.id$ = this.route.paramMap.pipe(map((params: ParamMap) => params.get("id")));
this.route.paramMap.subscribe((params: ParamMap) => (this.id = params.get("id")));
// Snapshot
this.route.snapshot.paramMap.get("id");
// this.route.snapshot.params["id"]; // --> ä¸å»ºè®®
```

#### data

```typescript
// Snapshot
this.route.snapshot.data['code']this.route.snapshot.data['code'];
// Observable
```

### è·¯ç”±äº‹ä»¶

åœ¨æ¯æ¬¡å¯¼èˆªä¸­ï¼Œ`Router` éƒ½ä¼šé€šè¿‡ `Router.events` å±æ€§å‘å¸ƒä¸€äº›å¯¼èˆªäº‹ä»¶ã€‚è¿™äº›äº‹ä»¶çš„èŒƒå›´æ¶µç›–äº†ä»å¼€å§‹å¯¼èˆªåˆ°ç»“æŸå¯¼èˆªä¹‹é—´çš„å¾ˆå¤šæ—¶é—´ç‚¹ã€‚

### forRoot(routes)/forChild(routes)

> æ ¹è·¯ç”±

å®šä¹‰ä¸€ä¸ªè·¯ç”±æ•°ç»„ `appRoutes` å¹¶æŠŠå®ƒä¼ ç»™ `RouterModule.forRoot()` æ–¹æ³•ã€‚ å®ƒä¼šè¿”å›ä¸€ä¸ªæ¨¡å—ï¼Œå…¶ä¸­åŒ…å«é…ç½®å¥½çš„ `Router` æœåŠ¡æä¾›å•†ï¼Œä»¥åŠè·¯ç”±åº“æ‰€éœ€çš„å…¶å®ƒæä¾›å•†ã€‚

æŠŠ `RouterModule.forRoot()` æ³¨å†Œåˆ° `AppModule` çš„ `imports` ä¸­ï¼Œèƒ½è®©è¯¥ `Router` æœåŠ¡åœ¨åº”ç”¨çš„ä»»ä½•åœ°æ–¹éƒ½èƒ½ä½¿ç”¨ã€‚

> **ğŸ¯ æ³¨æ„ï¼š** `RouterModule.forRoot` æ–¹æ³•æ˜¯ç”¨äºæ³¨å†Œå…¨åº”ç”¨çº§æä¾›å•†çš„ç¼–ç æ¨¡å¼ã€‚è¦è¯¦ç»†äº†è§£å…¨åº”ç”¨çº§æä¾›å•†ï¼Œå‚è§[å•ä¾‹æœåŠ¡](https://angular.cn/guide/singleton-services#forRoot-router) ä¸€ç« ã€‚

åªåœ¨æ ¹æ¨¡å— `AppRoutingModule` ä¸­è°ƒç”¨ `RouterModule.forRoot()`ï¼ˆå¦‚æœåœ¨ `AppModule` ä¸­æ³¨å†Œåº”ç”¨çš„é¡¶çº§è·¯ç”±ï¼Œé‚£å°±åœ¨ `AppModule` ä¸­è°ƒç”¨ï¼‰ã€‚ åœ¨å…¶å®ƒæ¨¡å—ä¸­ï¼Œä½ å°±å¿…é¡»è°ƒç”¨**`RouterModule.forChild`**æ–¹æ³•æ¥æ³¨å†Œé™„å±è·¯ç”±ã€‚

æ¨¡å—æ‡’åŠ è½½ï¼šåœ¨æ ¹è·¯ç”±ä¸­é…ç½®

```ts
// angular 8+
const routes: Routes = [
  {
    path: "admin",
    loadChildren: () => import("./admin/admin.module").then(mod => mod.AdminModule)
  }
];
```

```ts
// angular 2~7
const routes: Routes = [
  {
    path: "route",
    loadChildren: "./route/route.module#RouteModule"
  }
];
```

å¹¶å¯¼å…¥è·¯ç”±æ¨¡å—ä¸ºæ ¹è·¯ç”±/å­è·¯ç”±

```ts
  imports: [BrowserModule, RouterModule.forRoot(routes)],
```

è·¯ç”±å™¨å‡ºå£

```html
<router-outlet></router-outlet>
```

### location

```ts
import { Location } from '@angular/common';

    private location: Location

  back() {
    this.location.back();
  }
```

### è·¯ç”±å‚æ•°

- å¿…è¦å‚æ•°

- å¯é€‰å‚æ•° â€”â€”å’Œå¿…è¦å‚æ•°ä¸€æ ·ï¼Œè·¯ç”±å™¨ä¹Ÿæ”¯æŒé€šè¿‡å¯é€‰å‚æ•°å¯¼èˆªã€‚ åœ¨ä½ å®šä¹‰å®Œå¿…è¦å‚æ•°ä¹‹åï¼Œå†é€šè¿‡ä¸€ä¸ª**ç‹¬ç«‹çš„å¯¹è±¡**æ¥å®šä¹‰å¯é€‰å‚æ•°

#### å¿…è¦å‚æ•° `/heroes/12138`

##### å®šä¹‰ `Routes`

`-routing.module.ts`

```typescript
const routes: Routes = [
  {
    path: "hero/:id",
    component: HeroDetailComponent
  }
];
```

##### å¯¼èˆª `RouterLink` `router.navigate`

`.component.ts`

```html
<a [routerLink]="['/hero/hero', id]">custom {{id}}</a>
```

```typescript
this.router.navigate(["/hero/hero", this.id]);
```

##### æ¥æ”¶ `ParamMap`

`.component.ts`

```typescript
// Observable
this.id$ = this.route.paramMap.pipe(map((params: ParamMap) => params.get("id")));
this.route.paramMap.subscribe((params: ParamMap) => (this.id = params.get("id")));
// Snapshot
this.route.snapshot.paramMap.get("id");
```

#### å¯é€‰å‚æ•° `/heroes;id=12138`

å¯é€‰çš„è·¯ç”±å‚æ•°æ²¡æœ‰ä½¿ç”¨`?`å’Œ`&`ç¬¦å·åˆ†éš”ï¼Œå› ä¸ºå®ƒä»¬å°†ç”¨åœ¨ URL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ã€‚ å®ƒä»¬æ˜¯ç”¨`;`åˆ†éš”çš„ã€‚ è¿™æ˜¯çŸ©é˜µ URL æ ‡è®°æ³•

##### å®šä¹‰&å¯¼èˆª `RouterLink` `router.navigate`

`.component.ts`

```typescript
this.router.navigate(["/hero/heroes", { id: "12138" }]);
```

```html
<a [routerLink]="['/hero/heroes', { id:'12138' }]">hero with id</a>
```

##### æ¥æ”¶ `ParamMap`

ä¸å¿…è¦å‚æ•°ä¸€è‡´

`.component.ts`

```typescript
// Observable
this.id$ = this.route.paramMap.pipe(map((params: ParamMap) => params.get("id")));
this.route.paramMap.subscribe((params: ParamMap) => (this.id = params.get("id")));
// Snapshot
this.route.snapshot.paramMap.get("id");
```

#### /heroes?id=12138

ä½¿ç”¨â€œï¼Ÿâ€å’Œâ€œ&â€ç¬¦å·åˆ†éš”

```typescript
let navigationExtras: NavigationExtras = {
  queryParams: { session_id: sessionId },
  fragment: "anchor"
};
```

#### éšå¼è·¯ç”±å¯¹è±¡ `/heroes`

ä» routes ä¸­è·å–è·¯ç”±å‚æ•°

##### å®šä¹‰

`-routing.module.ts`

```ts
const routes: Routes = [
  {
    path: "list",
    component: ListComponent,
    data: { code: "CBH" }
  }
];
```

`.component.ts`

```ts
// Snapshot
this.route.snapshot.data['code']this.route.snapshot.data['code'];
// Observable
```

---

ğŸ¯<https://angular.cn/guide/router#milestone-4-crisis-center-feature>

### å­è·¯ç”±

å¯¹è¿™äº›è·¯ç”±çš„å¤„ç†ä¸­æœ‰ä¸€äº›*é‡è¦çš„ä¸åŒ*ã€‚

è·¯ç”±å™¨ä¼šæŠŠè¿™äº›è·¯ç”±å¯¹åº”çš„ç»„ä»¶æ”¾åœ¨ `CrisisCenterComponent` çš„ `RouterOutlet` ä¸­ï¼Œè€Œä¸æ˜¯ `AppComponent` å£³ç»„ä»¶ä¸­çš„ã€‚

`CrisisListComponent` åŒ…å«å±æœºåˆ—è¡¨å’Œä¸€ä¸ª `RouterOutlet`ï¼Œç”¨ä»¥æ˜¾ç¤º `Crisis Center Home` å’Œ `Crisis Detail` è¿™ä¸¤ä¸ªè·¯ç”±ç»„ä»¶ã€‚

`Crisis Detail` è·¯ç”±æ˜¯ `Crisis List` çš„å­è·¯ç”±ã€‚ç”±äºè·¯ç”±å™¨é»˜è®¤ä¼š[å¤ç”¨ç»„ä»¶](https://angular.cn/guide/router#reuse)ï¼Œå› æ­¤å½“ä½ é€‰æ‹©äº†å¦ä¸€ä¸ªå±æœºæ—¶ï¼Œ`CrisisDetailComponent` ä¼šè¢«å¤ç”¨ã€‚
ä½œä¸ºå¯¹æ¯”ï¼Œå›å¤´çœ‹çœ‹ `Hero Detail` è·¯ç”±ï¼Œæ¯å½“ä½ ä»åˆ—è¡¨ä¸­é€‰æ‹©äº†ä¸åŒçš„è‹±é›„æ—¶ï¼Œ[éƒ½ä¼šé‡æ–°åˆ›å»ºè¯¥ç»„ä»¶](https://angular.cn/guide/router#snapshot-the-no-observable-alternative)ã€‚

åœ¨é¡¶çº§ï¼Œä»¥ `/` å¼€å¤´çš„è·¯å¾„æŒ‡å‘çš„æ€»æ˜¯åº”ç”¨çš„æ ¹ã€‚ ä½†è¿™é‡Œæ˜¯å­è·¯ç”±ã€‚ å®ƒä»¬æ˜¯åœ¨çˆ¶è·¯ç”±è·¯å¾„çš„åŸºç¡€ä¸Šåšå‡ºçš„æ‰©å±•ã€‚

`-routing.module.ts`

```typescript
const crisisCenterRoutes: Routes = [
  {
    path: "crisis-center",
    component: CrisisCenterComponent,
    children: [
      {
        path: "",
        component: CrisisListComponent,
        children: [
          {
            path: ":id",
            component: CrisisDetailComponent
          },
          {
            path: "",
            component: CrisisCenterHomeComponent
          }
        ]
      }
    ]
  }
];
```

`.component.ts`

```html
<h2>CRISIS CENTER</h2>
<router-outlet></router-outlet>
```

### æ‡’åŠ è½½ï¼ˆæƒ°æ€§åŠ è½½ï¼‰ã€é¢„åŠ è½½

### base href
